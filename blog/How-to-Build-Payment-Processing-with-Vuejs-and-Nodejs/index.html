<!DOCTYPE html><html lang="en" prefix="og: http://ogp.me/ns#"><head><meta name="author" content="Connor Leech"><title>How to process payments with Node.js, Vue 2 and Stripe</title><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta http-equiv="cleartype" content="on"><meta name="MobileOptimized" content="320"><meta name="HandheldFriendly" content="True"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><meta name="description" content="This post goes through building a website for selling products. We set up a Vue client side application and Node.js server side app. The apps use Stripe Javascript libraries for payment processing. We deploy the static app to Amazon S3 and deploy the server to the cloud using Heroku"><meta name="keywords" content="laravel, aws, javascript, php, developer, software engineer, web development, software, node.js, serverless, lambda, san francisco, bay area, east bay, vue, vuejs, vue.js, vue 2, laravel 5, amazon web services"><meta name="zipcode" content="94501"><meta name="city" content="Alameda"><meta name="state" content="California"><meta name="country" content="United States"><meta name="language" content="EN"><meta property="og:site_name" content="Connor Leech Blog | Javascript and Laravel tutorials"><meta property="og:description" content="Get notified about the latest trends in web development, career growth and cloud infrastructure. I send emails about twice a month covering tutorials in Javascript, Laravel and Cloud"><meta property="og:image" content="http://i0.kym-cdn.com/photos/images/original/001/018/899/936.jpg"><meta property="og:title" content="How to process payments with Node.js, Vue 2 and Stripe"><meta property="og:description" content="This post goes through building a website for selling products. We set up a Vue client side application and Node.js server side app. The apps use Stripe Javascript libraries for payment processing. We deploy the static app to Amazon S3 and deploy the server to the cloud using Heroku"><!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-70809574-1"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());

gtag('config', 'UA-70809574-1');
</script><!-- Favicon--><link rel="shortcut icon" type="image/png" href="/images/favicon.ico"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/images/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png"><!-- Vendor Fonts--><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css" rel="stylesheet" type="text/css"><link href="/bower_components/animate.css/animate.min.css" rel="stylesheet" type="text/css"><link href="https://fonts.googleapis.com/css?family=Yantramanav" rel="stylesheet"><!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries--><!-- WARNING: Respond.js doesn't work if you view the page via file://--><!--if lt IE 9script(src='https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js')
script(src='https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js')
--><link rel="alternate" href="/atom.xml" title="config.title" type="application/rss2.xml"><link rel="stylesheet" href="/css/main.css"></head><body id="page-top" data-spy="scroll" data-target=".navbar-fixed-top" class="post"><!-- Nav--><nav role="navigation" class="navbar navbar-custom navbar-fixed-top"><div class="container"><div class="navbar-header"><a href="/" class="navbar-brand"><img src="/images/employbl_logo.svg" style="height:100px; width:100px;"></a><button type="button" data-toggle="collapse" data-target=".navbar-main-collapse" class="navbar-toggle"><i class="fa fa-bars"></i></button></div><div class="collapse navbar-collapse navbar-left navbar-main-collapse"></div><div class="collapse navbar-collapse navbar-right navbar-main-collapse"><ul class="nav navbar-nav"><li><a href="/blog" class="page-scroll">Blog üî®</a></li><li><a href="/#about" class="page-scroll">About ‚ö°</a></li><li><a href="https://leanpub.com/badass-web-development-with-laravel-5" target="_blank" class="page-scroll">Book üìñ</a></li></ul></div></div></nav><main id="content"><div id="archive" class="container"><div class="row"> <div class="col-sm-2 col-md-2"><h3>Categories</h3><a href="/blog"><p>All</p></a><a href="/categories/Career"><p>Career</p></a><a href="/categories/Programming"><p>Programming</p></a><a href="/categories/Javascript"><p>Javascript</p></a><a href="/categories/Laravel"><p>Laravel</p></a><a href="/categories/Cloud"><p>Cloud</p></a><a href="/categories/PHP"><p>PHP</p></a></div><div class="col-xs-12 col-md-8"><article class="post"><div class="row"><div class="col-md-10 col-md-offset-1"><h1 class="post-title">How to process payments with Node.js, Vue 2 and Stripe</h1></div></div><div class="row"><div class="post-meta"><h5><span>Connor Leech</span><span class="date"> - Aug 19, 2017&ensp;in<span class="post-categories">&ensp;<a href="/categories/Javascript/" class="post-category">Javascript</a></span></span></h5><a target="_blank" href="http://twitter.com/intent/tweet?status=How to process payments with Node.js, Vue 2 and Stripe by @Connor11528+http://connorleech.info/blog/How-to-Build-Payment-Processing-with-Vuejs-and-Nodejs/" class="btn btn-primary social-share twitter"><i class="fa fa-twitter fa-2x"><span class="hidden-xs"></span></i></a><a target="_blank" href="http://www.linkedin.com/shareArticle?mini=true&amp;url=http://connorleech.info/blog/How-to-Build-Payment-Processing-with-Vuejs-and-Nodejs/&amp;title=How to process payments with Node.js, Vue 2 and Stripe&amp;source=connorleech.info" class="btn btn-primary social-share linkedin"><i class="fa fa-linkedin fa-2x"><span class="hidden-xs"></span></i></a></div></div><div class="post-body"><p>In this tutorial we are going to build a website for selling artisan bundles of sticks online. It is going to be called Stickly! In order to make this site we‚Äôre going to need a Product display page, an Order page and a Confirmation details page. We‚Äôll accept payments using Stripe‚Äôs client side and server side Javascript libraries.</p>
<p>To build the frontend we‚Äôll use Vue 2 with <a href="https://github.com/vuejs/vue-router" target="_blank" rel="external">vue-router</a> for client side routing.  The frontend application will be responsible for collecting user information and sending a request to Stripe for a special token. Once we have that token from Stripe, our client side code will forward the token to our server in order to initiate the charge.</p>
<p>The server will be made from Node.js using express and its associated utility libraries. There will be two endpoints. One for creating a new charge and the other for returning details about a particular charge, based on a unique identifier that we get from Stripe.</p>
<p>In order to build this application and start selling online, we are going to utilize third party services. To build a real world website that accept actual payments on the internet you‚Äôll need to sign up for the following services and locate your special API keys.</p>
<ul>
<li><a href="https://stripe.com/" target="_blank" rel="external">Stripe</a>: Stripe is the current standard for developers accepting payments in the US. There are many competitors out there but Stripe‚Äôs extensive documentation and ease of use has made it the de facto choice for payment processing online. We are going to use their <a href="https://stripe.com/docs/stripe.js?" target="_blank" rel="external">client side</a> Javascript library and their server side <a href="https://stripe.com/docs/api/node" target="_blank" rel="external">Node.js package</a>.</li>
<li><a href="https://aws.amazon.com/s3/" target="_blank" rel="external">Amazon Simple Storage Service (S3)</a>: Amazon S3 is part of Amazon Web Services, the infastructure that powers a very large portion of the internet. The Simple Storage Solution (S3) provides a way to host static assets like webpages, images or videos and make them globally accessible. You can create a free AWS account <a href="https://aws.amazon.com/free" target="_blank" rel="external">here</a>.</li>
<li><a href="https://www.heroku.com/" target="_blank" rel="external">Heroku</a>: Heroku is a cloud application platform that was acquired by Salesforce. It simplifies the task of deploying and maintaining cloud infastructure. We are going to use Heroku <a href="https://devcenter.heroku.com/articles/getting-started-with-nodejs#set-up" target="_blank" rel="external">Command Line Interface (CLI) </a> to deploy our Node.js server to the internet.</li>
</ul>
<p><img src="https://cdn.scotch.io/2842/b7yhhuUPSGO1fEkMHD6P_sticks.jpeg" alt=""></p>
<ul>
<li>Demo: <a href="http://stickly.io/#/" target="_blank" rel="external">http://stickly.io/#/</a></li>
<li>Frontend code: <a href="https://github.com/connor11528/stickly-frontend" target="_blank" rel="external">https://github.com/connor11528/stickly-frontend</a></li>
<li>Backend code: <a href="https://github.com/connor11528/stickly-backend" target="_blank" rel="external">https://github.com/connor11528/stickly-backend</a></li>
</ul>
<h2 id="Frontend-Application"><a href="#Frontend-Application" class="headerlink" title="Frontend Application"></a>Frontend Application</h2><p>First we are going to build the frontend Vue.js application. This is the website portion that the user will see. Ultimately it will be hosted using Amazon S3, but first we have to set everything up.</p>
<p>The Vue.js core team maintains a collection of generators for scaffolding new projects. For this tutorial we are going to use the <a href="https://github.com/vuejs-templates/webpack-simple" target="_blank" rel="external">webpack-simple template</a> to quickly get a client side Vue.js up and running. This will include a custom Webpack setup and specific <code>.vue</code> files that contain our HTML, CSS and Javascript for dedicated components.</p>
<p>If you have not used Vue before you are in for a treat! If you are experienced with Vue this setup should be very straightforward to you. </p>
<p>We are going to use <a href="http://bulma.io/" target="_blank" rel="external">Bulma</a> for styling, which is a Flexbox based CSS library. If you are new to using CSS Flexbox you can check out the Scotch.io article <a href="https://scotch.io/tutorials/a-visual-guide-to-css3-flexbox-properties" target="_blank" rel="external">here</a>. In depth knowledge of Flexbox is not a prerequisite for this tutorial though!</p>
<h3 id="Create-the-Vue-js-app"><a href="#Create-the-Vue-js-app" class="headerlink" title="Create the Vue.js app"></a>Create the Vue.js app</h3><p>Create the Vue.js static website app with the following commands in your command line interface.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$ vue init webpack-simple YOUR_APP_NAME</div><div class="line">$ <span class="built_in">cd</span> YOUR_APP_NAME</div><div class="line">$ npm install</div><div class="line">$ npm install vue-router moment --save</div></pre></td></tr></table></figure>
<p>This generates our new project and includes the additional dependecies for client side routing and date formating. </p>
<h3 id="Instatiate-the-application"><a href="#Instatiate-the-application" class="headerlink" title="Instatiate the application"></a>Instatiate the application</h3><p>Our <em>src/main.js</em> file is going to be the nerve center for our application. This is the first file to get called and it will call all of our components and link our Javascript application to the index.html page. Let‚Äôs import all of the components, libraries and setup we need for our application within this file.</p>
<p><strong>./src/main.js</strong>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Environment configuration</span></div><div class="line"><span class="keyword">if</span> (process.env.NODE_ENV === <span class="string">'production'</span>) &#123;</div><div class="line">    <span class="built_in">window</span>.endpoint = <span class="string">'https://stickly.herokuapp.com'</span>;</div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">    <span class="built_in">window</span>.endpoint = <span class="string">'http://localhost:3000'</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// Global Variables</span></div><div class="line"><span class="built_in">window</span>.moment = <span class="built_in">require</span>(<span class="string">'moment'</span>);</div><div class="line"><span class="built_in">window</span>.axios = <span class="built_in">require</span>(<span class="string">'axios'</span>);</div><div class="line"><span class="built_in">window</span>.axios.defaults.headers.common[<span class="string">'X-Requested-With'</span>] = <span class="string">'XMLHttpRequest'</span>;</div><div class="line"></div><div class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></div><div class="line"><span class="keyword">import</span> VueRouter <span class="keyword">from</span> <span class="string">'vue-router'</span></div><div class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">'./components/App.vue'</span></div><div class="line"><span class="keyword">import</span> Product <span class="keyword">from</span> <span class="string">'./components/Product.vue'</span></div><div class="line"><span class="keyword">import</span> Order <span class="keyword">from</span> <span class="string">'./components/Order.vue'</span></div><div class="line"><span class="keyword">import</span> Complete <span class="keyword">from</span> <span class="string">'./components/Complete.vue'</span></div><div class="line"></div><div class="line">Vue.use(VueRouter);</div><div class="line"></div><div class="line"><span class="comment">// Register routes</span></div><div class="line"><span class="keyword">const</span> routes = [</div><div class="line">  &#123; <span class="attr">name</span>: <span class="string">'home'</span>, <span class="attr">path</span>: <span class="string">'/'</span>, <span class="attr">component</span>: Product &#125;,</div><div class="line">  &#123; <span class="attr">name</span>: <span class="string">'order'</span>, <span class="attr">path</span>: <span class="string">'/order'</span>, <span class="attr">component</span>: Order &#125;,</div><div class="line">  &#123; <span class="attr">name</span>: <span class="string">'order-complete'</span>, <span class="attr">path</span>: <span class="string">'/order-complete/:id'</span>, <span class="attr">component</span>: Complete &#125;</div><div class="line">];</div><div class="line"></div><div class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> VueRouter(&#123;</div><div class="line">  routes</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="comment">// Instantiate application to the DOM</span></div><div class="line"><span class="keyword">new</span> Vue(&#123;</div><div class="line">    router,</div><div class="line">    <span class="attr">el</span>: <span class="string">'#app'</span>,</div><div class="line">    data()&#123;</div><div class="line">        <span class="keyword">return</span> &#123;</div><div class="line">            <span class="attr">order_details</span>: &#123;&#125;</div><div class="line">        &#125;</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">render</span>: <span class="function"><span class="params">h</span> =&gt;</span> h(App)</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>The first thing we do here is determine whether we are in our production or development environment. This value will be set by webpack when we run <code>npm run dev</code> (for development) or <code>npm run build</code> (for production). Based on the environment we set a global variable attached to the browser‚Äôs window object that determines which URL our Vue app will make XHR (ajax) requests to. For making asynchronous requests from the background we are going to use <a href="https://github.com/mzabriskie/axios" target="_blank" rel="external">axios</a>.</p>
<p>Next we register the components we will need and bind them to specific routes. This is the pattern required for setting up client side routing with <a href="https://github.com/vuejs/vue-router" target="_blank" rel="external">vue-router</a>, the official Vue.js routing package maintained by the Vue.js core team.</p>
<p>We will also need to modify our <em>index.html</em> page to include the Stripe javascript library, the Bulma CSS framework, style classes and Font Awesome.</p>
<p><strong>./index.html</strong>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"IE=edge"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1"</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Stickly<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="comment">&lt;!-- Styles --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">'stylesheet'</span> <span class="attr">href</span>=<span class="string">'https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css'</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"https://cdnjs.cloudflare.com/ajax/libs/bulma/0.5.1/css/bulma.css"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"./css/main.css"</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"hero is-fullheight"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">'app'</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"></div><div class="line">  <span class="comment">&lt;!-- Scripts --&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"https://js.stripe.com/v2/"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"/dist/build.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>Our Vue.js application will be bound to <em>index.html</em> through the ‚Äúapp‚Äù id tag where it will mount our App component. This app component will display most of our content and our Vue.js application logic. It displays a navigation section and the special <code>&lt;router-view&gt;&lt;/router-view&gt;</code> component. This component tells vue-router where to mount our views. The router takes the current URL and mounts the component to this space accordingly. </p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></div><div class="line">    <span class="comment">&lt;!-- Nav --&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"hero-head"</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">nav</span> <span class="attr">class</span>=<span class="string">"nav"</span>&gt;</span></div><div class="line">              <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"nav-left"</span>&gt;</span></div><div class="line">                  <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">"/"</span> <span class="attr">class</span>=<span class="string">"nav-item"</span>&gt;</span>Stickly<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"nav-toggle"</span>&gt;</span></div><div class="line">                  <span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line">                  <span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line">                  <span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"nav-right nav-menu"</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"nav-item"</span> <span class="attr">href</span>=<span class="string">'mailto:support@stickly.com'</span>&gt;</span></div><div class="line">                      Contact</div><div class="line">                    <span class="tag">&lt;/<span class="name">a</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">              <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">nav</span>&gt;</span></div><div class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</div><div class="line">  <span class="attr">name</span>: <span class="string">'app'</span>,</div><div class="line">  data () &#123;</div><div class="line">    <span class="keyword">return</span> &#123;&#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<p>The App componet is the heart of our application. All of our other Vue components will render where the router-view component is. This way we do not need to duplicate code for the Nav bar or HTML headers on every page. </p>
<p>We defined in our <em>main.js</em> file that when the user hits the root of our application the Product component should render. Let‚Äôs define that now!</p>
<h3 id="Create-the-Product-page"><a href="#Create-the-Product-page" class="headerlink" title="Create the Product page"></a>Create the Product page</h3><p>The product page is the landing page that entices the user to buy our product, in this case a bundle of sticks. There is an open source template called <a href="https://github.com/dansup/bulma-templates" target="_blank" rel="external">dansup/bulma-templates</a> that we can use to quickly style the product page. There are lots of example templates for Bulma that you can browse <a href="https://dansup.github.io/bulma-templates/" target="_blank" rel="external">here</a> and <a href="http://bulma.io/expo/" target="_blank" rel="external">here</a>, depending on what you are building. The product page template is a good starting point, though I have made some minor modifications.</p>
<p><img src="https://cdn.scotch.io/2842/QVDxcSwcSJ2rv5yjhZqf_Screen%20Shot%202017-08-16%20at%2012.38.58%20PM.png" alt=""></p>
<p><strong>./src/components/Product.vue</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"section"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"columns"</span> <span class="attr">style</span>=<span class="string">'min-height:800px;'</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"column is-6"</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"image is-2by2"</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"https://cdn.scotch.io/2842/b7yhhuUPSGO1fEkMHD6P_sticks.jpeg"</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"column is-5 is-offset-1"</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"title is-2"</span>&gt;</span>Bundle of Sticks<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"title is-3 has-text-muted"</span>&gt;</span>$ 15<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">hr</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">p</span>&gt;</span>This bundle of sticks provides an earthy fragrance and aesthetic natural appeal. Your bundle of sticks will come with a personalized note. The perfect natural gift for any time of year!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">'level'</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">"/order"</span> <span class="attr">class</span>=<span class="string">"button is-large is-primary level-item has-text-centered"</span>&gt;</span>Buy Now<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;&#125;</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<p>As you can see this component is all plain HTML with Bulma‚Äôs specific classes for styling. The only Vue specific part of this file is the <code>&lt;router-link&gt;&lt;/router-link&gt;</code> component. This automatically generates an anchor tag and connects the route to the routes we defined for vue-router in our <em>main.js</em> file. </p>
<p>When the user clicks the Order Now button they will be redirected to the Order page where they can fill out their details and submit their information for payment processing. </p>
<h3 id="The-Order-page"><a href="#The-Order-page" class="headerlink" title="The Order page"></a>The Order page</h3><p>The order page displays fields for the user‚Äôs contact details (name and email), their shipping information, a personalized note for the bundle of sticks and fields for their credit card details. Additionally, we do checks to make sure that the credit card fields are filled out correctly with some Vue.js form validation techniques in the <code>validate</code> method.</p>
<p><strong>./src/components/Order.vue</strong> (the html portion)
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">'container'</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">'columns'</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">'column is-4'</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"https://cdn.scotch.io/2842/b7yhhuUPSGO1fEkMHD6P_sticks.jpeg"</span> <span class="attr">alt</span>=<span class="string">"A bundle of sticks"</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">'column is-4'</span>&gt;</span>            </div><div class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">'field'</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">label</span>&gt;</span>Name<span class="tag">&lt;/<span class="name">label</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"control has-icons-left has-icons-right"</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">"input"</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">placeholder</span>=<span class="string">"First and Last"</span> <span class="attr">v-model</span>=<span class="string">'name'</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"icon is-small is-left"</span>&gt;</span></div><div class="line">                          <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"fa fa-user"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"field"</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">label</span>&gt;</span>Email<span class="tag">&lt;/<span class="name">label</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"control has-icons-left has-icons-right"</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">"input"</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">placeholder</span>=<span class="string">"Email address"</span> <span class="attr">v-model</span>=<span class="string">'email'</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"icon is-small is-left"</span>&gt;</span></div><div class="line">                            <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"fa fa-envelope"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"></div><div class="line">                <span class="tag">&lt;<span class="name">hr</span> <span class="attr">id</span>=<span class="string">'left-line'</span>&gt;</span></div><div class="line">                                </div><div class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"field"</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"card_number"</span>&gt;</span>Card Number<span class="tag">&lt;/<span class="name">label</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"card_number"</span> <span class="attr">v-model</span>=<span class="string">"card.number"</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">:class</span>=<span class="string">"['is-danger' ? cardNumberError : '', 'input']"</span> <span class="attr">placeholder</span>=<span class="string">'4242424242424242'</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"help is-danger"</span> <span class="attr">v-show</span>=<span class="string">"cardNumberError"</span>&gt;</span></div><div class="line">                        &#123;&#123; cardNumberError &#125;&#125;</div><div class="line">                    <span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"></div><div class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"field"</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"cvc"</span>&gt;</span>CVC<span class="tag">&lt;/<span class="name">label</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"cvc"</span> <span class="attr">v-model</span>=<span class="string">"card.cvc"</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">class</span>=<span class="string">"input"</span> <span class="attr">placeholder</span>=<span class="string">'123'</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"help is-danger"</span> <span class="attr">v-show</span>=<span class="string">"cardCvcError"</span>&gt;</span></div><div class="line">                        &#123;&#123; cardCvcError &#125;&#125;</div><div class="line">                    <span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"></div><div class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"field"</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"exp_month"</span>&gt;</span>Expiry Month<span class="tag">&lt;/<span class="name">label</span>&gt;</span></div><div class="line">                    </div><div class="line">                    <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"exp_month"</span> <span class="attr">v-model</span>=<span class="string">"card.exp_month"</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">:class</span>=<span class="string">"['is-danger' ? cardMonthError : '', 'input']"</span> <span class="attr">placeholder</span>=<span class="string">"MM"</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"help is-danger"</span> <span class="attr">v-show</span>=<span class="string">"cardMonthError"</span>&gt;</span></div><div class="line">                        &#123;&#123; cardMonthError &#125;&#125;</div><div class="line">                    <span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"></div><div class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"field"</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"exp_month"</span>&gt;</span>Expiry Year<span class="tag">&lt;/<span class="name">label</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"exp_year"</span> <span class="attr">v-model</span>=<span class="string">"card.exp_year"</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">:class</span>=<span class="string">"['is-danger' ? cardYearError : '', 'input']"</span> <span class="attr">placeholder</span>=<span class="string">"YY"</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"help is-danger"</span> <span class="attr">v-show</span>=<span class="string">"cardYearError"</span>&gt;</span></div><div class="line">                        &#123;&#123; cardYearError &#125;&#125;</div><div class="line">                    <span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">                    </div><div class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"help is-danger"</span> <span class="attr">v-if</span>=<span class="string">"cardCheckError"</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123; cardCheckErrorMessage &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span> </div><div class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">'column is-4'</span>&gt;</span>         </div><div class="line">                <span class="tag">&lt;<span class="name">label</span>&gt;</span>Special Note<span class="tag">&lt;/<span class="name">label</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">textarea</span> <span class="attr">class</span>=<span class="string">"textarea"</span> <span class="attr">placeholder</span>=<span class="string">"What would you like the note to say?"</span> <span class="attr">v-model</span>=<span class="string">'specialNote'</span>&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></div><div class="line">                </div><div class="line">                <span class="tag">&lt;<span class="name">hr</span>&gt;</span></div><div class="line">                </div><div class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"field"</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">label</span>&gt;</span>Address<span class="tag">&lt;/<span class="name">label</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">'text'</span> <span class="attr">class</span>=<span class="string">'input'</span> <span class="attr">v-model</span>=<span class="string">'address.street'</span> <span class="attr">placeholder</span>=<span class="string">'123 Fake St #303'</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"field"</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">label</span>&gt;</span>City<span class="tag">&lt;/<span class="name">label</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">'text'</span> <span class="attr">class</span>=<span class="string">'input'</span> <span class="attr">v-model</span>=<span class="string">'address.city'</span> <span class="attr">placeholder</span>=<span class="string">'San Francisco'</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"field"</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">label</span>&gt;</span>State<span class="tag">&lt;/<span class="name">label</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">'text'</span> <span class="attr">class</span>=<span class="string">'input'</span> <span class="attr">v-model</span>=<span class="string">'address.state'</span> <span class="attr">placeholder</span>=<span class="string">'CA'</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"field"</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">label</span>&gt;</span>Zip<span class="tag">&lt;/<span class="name">label</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">'text'</span> <span class="attr">class</span>=<span class="string">'input'</span> <span class="attr">v-model</span>=<span class="string">'address.zip'</span> <span class="attr">placeholder</span>=<span class="string">'94607'</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"columns"</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">'column is-12'</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">class</span>=<span class="string">"button is-primary is-large is-pulled-right"</span> @<span class="attr">click.prevent</span>=<span class="string">"validate"</span> <span class="attr">:disabled</span>=<span class="string">"cardCheckSending"</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">span</span> <span class="attr">v-if</span>=<span class="string">"cardCheckSending"</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"fa fa-btn fa-spinner fa-spin"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> </div><div class="line">                        Ordering...</div><div class="line">                    <span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">span</span> <span class="attr">v-else</span>&gt;</span></div><div class="line">                        Place Order</div><div class="line">                    <span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></div><div class="line"><span class="selector-tag">h2</span> &#123; <span class="attribute">text-decoration</span>: underline; &#125;</div><div class="line"><span class="selector-class">.textarea</span><span class="selector-pseudo">:not(</span><span class="selector-attr">[rows]</span>) &#123; <span class="attribute">max-height</span>: <span class="number">110px</span>; <span class="attribute">min-height</span>: <span class="number">110px</span>; &#125;</div><div class="line"><span class="selector-class">.container</span> &#123; <span class="attribute">margin-bottom</span>: <span class="number">30px</span>; &#125;</div><div class="line"><span class="selector-class">.column</span> &gt; <span class="selector-tag">img</span> &#123; <span class="attribute">margin-top</span>: <span class="number">60px</span>; &#125;</div><div class="line"><span class="selector-class">.button-field</span> &#123; <span class="attribute">display</span>: flex; <span class="attribute">justify-content</span>: center; &#125;</div><div class="line"><span class="selector-id">#left-line</span> &#123; <span class="attribute">margin-top</span>:<span class="number">27px</span>; &#125;</div><div class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>In the above template code we style the page and provide an image of the product the customer is about to buy. Additionally, we bind the input for these form fields using <code>v-model</code>. We‚Äôll have to define these fields in the vue object‚Äôs data property, featured below. We also provide helper classes bound to specific properties to show red error messages when forms are not filled out properly or left blank.</p>
<p>The Javascript logic for this component lives in the same portion and is featured below. This code is responsible for binding data to the form fields, obtaining a token from Stripe and sending the payment request to our Node.js server.</p>
<p><strong>./src/components/Order.vue</strong> (the JS portion)
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">'axios'</span>;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</div><div class="line">    data()&#123;</div><div class="line">        <span class="keyword">return</span> &#123;</div><div class="line">            <span class="attr">stripeKey</span>: <span class="string">'YOUR_STRIPE_PUBLIC_KEY'</span>,</div><div class="line"></div><div class="line">            <span class="comment">// fields</span></div><div class="line">            name: <span class="string">'Connor Leech'</span>,</div><div class="line">            <span class="attr">email</span>: <span class="string">'connor@employbl.com'</span>,</div><div class="line">            <span class="attr">specialNote</span>: <span class="string">'This is the text to put on the bundle of sticks'</span>,</div><div class="line">            <span class="attr">address</span>: &#123;</div><div class="line">                <span class="attr">street</span>: <span class="string">'123 Something Lane'</span>,</div><div class="line">                <span class="attr">city</span>: <span class="string">'San Francisco'</span>,</div><div class="line">                <span class="attr">state</span>: <span class="string">'CA'</span>,</div><div class="line">                <span class="attr">zip</span>: <span class="string">'94607'</span></div><div class="line">            &#125;,</div><div class="line"></div><div class="line">            <span class="attr">card</span>: &#123;</div><div class="line">                <span class="attr">number</span>: <span class="string">'4242424242424242'</span>,</div><div class="line">                <span class="attr">cvc</span>: <span class="string">'123'</span>,</div><div class="line">                <span class="attr">exp_month</span>: <span class="string">'01'</span>,</div><div class="line">                <span class="attr">exp_year</span>: <span class="string">'19'</span></div><div class="line">            &#125;,</div><div class="line"></div><div class="line">            <span class="comment">// validation</span></div><div class="line">            cardNumberError: <span class="literal">null</span>,</div><div class="line">            <span class="attr">cardCvcError</span>: <span class="literal">null</span>,</div><div class="line">            <span class="attr">cardMonthError</span>: <span class="literal">null</span>,</div><div class="line">            <span class="attr">cardYearError</span>: <span class="literal">null</span>,</div><div class="line">            <span class="attr">cardCheckSending</span>: <span class="literal">false</span>,</div><div class="line">            <span class="attr">cardCheckError</span>: <span class="literal">false</span>,</div><div class="line">            <span class="attr">cardCheckErrorMessage</span>: <span class="string">''</span></div><div class="line">        &#125;</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">methods</span>: &#123;</div><div class="line">        validate()&#123;</div><div class="line">            <span class="keyword">this</span>.clearCardErrors();</div><div class="line">            <span class="keyword">let</span> valid = <span class="literal">true</span>;</div><div class="line">            <span class="keyword">if</span>(!<span class="keyword">this</span>.card.number)&#123; valid = <span class="literal">false</span>; <span class="keyword">this</span>.cardNumberError = <span class="string">"Card Number is Required"</span>; &#125;</div><div class="line">            <span class="keyword">if</span>(!<span class="keyword">this</span>.card.cvc)&#123; valid = <span class="literal">false</span>; <span class="keyword">this</span>.cardCvcError = <span class="string">"CVC is Required"</span>; &#125;</div><div class="line">            <span class="keyword">if</span>(!<span class="keyword">this</span>.card.exp_month)&#123; valid = <span class="literal">false</span>; <span class="keyword">this</span>.cardMonthError = <span class="string">"Month is Required"</span>; &#125;</div><div class="line">            <span class="keyword">if</span>(!<span class="keyword">this</span>.card.exp_year)&#123; valid = <span class="literal">false</span>; <span class="keyword">this</span>.cardYearError = <span class="string">"Year is Required"</span>; &#125;</div><div class="line">            <span class="keyword">if</span>(valid)&#123;</div><div class="line">                <span class="keyword">this</span>.createToken();</div><div class="line">            &#125;</div><div class="line">        &#125;,</div><div class="line">        clearCardErrors()&#123;</div><div class="line">            <span class="keyword">this</span>.cardNumberError = <span class="literal">null</span>;</div><div class="line">            <span class="keyword">this</span>.cardCvcError = <span class="literal">null</span>;</div><div class="line">            <span class="keyword">this</span>.cardMonthError = <span class="literal">null</span>;</div><div class="line">            <span class="keyword">this</span>.cardYearError = <span class="literal">null</span>;</div><div class="line">        &#125;,</div><div class="line">        createToken() &#123;</div><div class="line">            <span class="keyword">this</span>.cardCheckError = <span class="literal">false</span>;</div><div class="line">            <span class="built_in">window</span>.Stripe.setPublishableKey(<span class="keyword">this</span>.stripeKey);</div><div class="line">            <span class="built_in">window</span>.Stripe.createToken(<span class="keyword">this</span>.card, $.proxy(<span class="keyword">this</span>.stripeResponseHandler, <span class="keyword">this</span>));</div><div class="line">            <span class="keyword">this</span>.cardCheckSending = <span class="literal">true</span>;</div><div class="line">        &#125;,</div><div class="line">        stripeResponseHandler(status, response) &#123;</div><div class="line">            <span class="keyword">this</span>.cardCheckSending = <span class="literal">false</span>;</div><div class="line">            <span class="keyword">if</span> (response.error) &#123;</div><div class="line">                <span class="keyword">this</span>.cardCheckErrorMessage = response.error.message;</div><div class="line">                <span class="keyword">this</span>.cardCheckError = <span class="literal">true</span>;</div><div class="line"></div><div class="line">                <span class="built_in">console</span>.error(response.error);</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line"></div><div class="line">                <span class="comment">// token to create a charge on our server </span></div><div class="line">                <span class="keyword">var</span> token_from_stripe = response.id;</div><div class="line"></div><div class="line">                <span class="keyword">var</span> request = &#123;</div><div class="line">                    <span class="attr">name</span>: <span class="keyword">this</span>.name,</div><div class="line">                    <span class="attr">email</span>: <span class="keyword">this</span>.email,</div><div class="line">                    <span class="attr">engravingText</span>: <span class="keyword">this</span>.engravingText,</div><div class="line">                    <span class="attr">address</span>: <span class="keyword">this</span>.address,</div><div class="line">                    <span class="attr">card</span>: <span class="keyword">this</span>.card,</div><div class="line">                    <span class="attr">token_from_stripe</span>: token_from_stripe</div><div class="line">                &#125;;</div><div class="line"></div><div class="line">                <span class="comment">// Send to our server</span></div><div class="line">                axios.post(<span class="string">`<span class="subst">$&#123;<span class="built_in">window</span>.endpoint&#125;</span>/charge`</span>, request)</div><div class="line">                    .then(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</div><div class="line">                        <span class="keyword">var</span> error = res.data.error;</div><div class="line">                        <span class="keyword">var</span> charge = res.data.charge;</div><div class="line">                        <span class="keyword">if</span> (error)&#123;</div><div class="line">                            <span class="built_in">console</span>.error(error);</div><div class="line">                        &#125; <span class="keyword">else</span> &#123;</div><div class="line">                            <span class="keyword">this</span>.$router.push(&#123; <span class="attr">path</span>: <span class="string">`order-complete/<span class="subst">$&#123;charge.id&#125;</span>`</span> &#125;)</div><div class="line">                        &#125;</div><div class="line">                    &#125;);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure></p>
<p>The <code>createToken()</code> function uses the Stripe.js library to create a unique token for our particular charge request. Once we have that token, we trigger the <code>stripeResponseHandler</code> method. This checks that there are no errors and submits the request to our server for processing. If we successfully make a charge on our Node.js server using the token provided to us by Stripe.js we redirect the user to the Order Complete page. There is additional logic here for rendering the validation errors as well.</p>
<h3 id="Order-Complete-page"><a href="#Order-Complete-page" class="headerlink" title="Order Complete page"></a>Order Complete page</h3><p>And finally, we get to the order complete page. This page will be rendered after we successfully create the charge on our server. The URL will include a unique id associated with the particular charge we created. This URL will be persistent so the user can browse back to it at any time in order to view their order details.</p>
<p><strong>./src/components/Complete.vue</strong>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">'container content'</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">h3</span> <span class="attr">style</span>=<span class="string">'color: white;'</span>&gt;</span>Order complete!<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>Congratulations! Your order for Sticks will be shipped out within 1-2 business days.  <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">''</span>&gt;</span>support@stickly.com<span class="tag">&lt;/<span class="name">a</span>&gt;</span>. We sent you a confirmation email for your records. Thanks so much!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-if</span>=<span class="string">'orderDetails'</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">dl</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">dt</span>&gt;</span>Order Number<span class="tag">&lt;/<span class="name">dt</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">dd</span>&gt;</span>&#123;&#123; orderDetails.id &#125;&#125;<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">dt</span>&gt;</span>Order Created<span class="tag">&lt;/<span class="name">dt</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">dd</span>&gt;</span>&#123;&#123; orderDetails.created | moment &#125;&#125;<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">dt</span>&gt;</span>Payment Amount<span class="tag">&lt;/<span class="name">dt</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">dd</span>&gt;</span>&#123;&#123; orderDetails.amount | currency &#125;&#125;<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">dt</span>&gt;</span>Shipping Address<span class="tag">&lt;/<span class="name">dt</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">dd</span>&gt;</span>&#123;&#123; orderDetails.shipping.address.line1 &#125;&#125;, &#123;&#123; orderDetails.shipping.address.city &#125;&#125;, &#123;&#123; orderDetails.shipping.address.state &#125;&#125; &#123;&#123; orderDetails.shipping.address.postal_code &#125;&#125;<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">dt</span>&gt;</span>Engraving Text<span class="tag">&lt;/<span class="name">dt</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">dd</span>&gt;</span>&#123;&#123; orderDetails.description &#125;&#125;<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">dt</span>&gt;</span>Email<span class="tag">&lt;/<span class="name">dt</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">dd</span>&gt;</span>&#123;&#123; orderDetails.receipt_email &#125;&#125;<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">dl</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></div><div class="line">    <span class="selector-tag">dt</span> &#123; <span class="attribute">font-weight</span>: bold; &#125;</div><div class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="actionscript"></span></div><div class="line"><span class="meta"><span class="meta-keyword">import</span> axios from 'axios';</span></div><div class="line"><span class="meta"><span class="meta-keyword">import</span> moment from 'moment';</span></div><div class="line"></div><div class="line">export <span class="keyword">default</span> &#123;</div><div class="line">    data()&#123;</div><div class="line">        <span class="keyword">return</span> &#123;</div><div class="line">            orderDetails: <span class="literal">false</span></div><div class="line">        &#125;;</div><div class="line">    &#125;,</div><div class="line">    created()&#123;</div><div class="line">        <span class="keyword">var</span> charge_id = <span class="keyword">this</span>.$route.params.id;</div><div class="line">        axios.get(`$&#123;window.endpoint&#125;/charge/$&#123;charge_id&#125;`)</div><div class="line">            .then((res)=&gt;&#123;</div><div class="line">                <span class="keyword">this</span>.orderDetails = res.data.charge;</div><div class="line">            &#125;);</div><div class="line">    &#125;,</div><div class="line">    filters: &#123;</div><div class="line">        moment(date) &#123;</div><div class="line">            <span class="keyword">return</span> moment.unix(date).format(<span class="string">'MMMM Do, YYYY - h:mm a'</span>);</div><div class="line">        &#125;,</div><div class="line">        currency(amount)&#123;</div><div class="line">            <span class="keyword">return</span> `$$&#123;(amount/<span class="number">100</span>).toFixed( <span class="number">2</span> )&#125;`;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>In this file we hit our backend again to grab the details for the order from the identification number in the URL. We then bind that data to render on the screen using Vue.js. We also define moment and currency <a href="https://vuejs.org/v2/guide/migration.html#Filters" target="_blank" rel="external">output filters</a> to format how the currency and dates are rendered to the screen.</p>
<h3 id="Testing-the-Frontend"><a href="#Testing-the-Frontend" class="headerlink" title="Testing the Frontend"></a>Testing the Frontend</h3><p>In your console run <code>npm run dev</code> and the frontend page of our website will be rendered out to <a href="http://localhost:8080/#/" target="_blank" rel="external">http://localhost:8080/#/</a> in a new tab. You should see the following screens for viewing the product and filling out order details.</p>
<p><img src="https://cdn.scotch.io/2842/J21r8hIiTPWaTU33Ga2Q_Screen%20Shot%202017-08-18%20at%201.29.30%20PM.png" alt=""></p>
<p><img src="https://cdn.scotch.io/2842/Px9w67X8RVaiDz1fWuy6_Screen%20Shot%202017-08-18%20at%201.30.30%20PM.png" alt=""></p>
<p>In the next section we will set up the Node.js server to create the actual charges.</p>
<p>Here is the source code repository for the frontend application code: <a href="https://github.com/connor11528/stickly-frontend" target="_blank" rel="external">https://github.com/connor11528/stickly-frontend</a></p>
<p>Let‚Äôs set up the server!</p>
<h2 id="Backend-Application"><a href="#Backend-Application" class="headerlink" title="Backend Application"></a>Backend Application</h2><p>Our server will be responsible for charging the user and providing the details about the order back to the customer. We are going to create a brand new project directory to keep our Node.js application. This will be a separate code repo from the frontend and deployed separately. </p>
<p>First let‚Äôs create our Node.js server projec and check the project into Git for version control. We will use git later on in order to deploy our app to the internet with Heroku.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">$ mkdir stickly-backend</div><div class="line">$ <span class="built_in">cd</span> stickly-backend</div><div class="line">$ npm init</div><div class="line">$ touch server.js .env .gitignore</div><div class="line">$ git init</div><div class="line">$ git add -A</div><div class="line">$ git commit -m <span class="string">'initial commit'</span></div></pre></td></tr></table></figure>
<p>This will set up an empty skeleton for our Node.js project and check the changes into git for version control. Make sure to add a <code>.gitignore</code> file that includes <code>.env</code> so that you do not accidentally push your secret keys to the internet. That file looks like this:</p>
<p><strong>./.env</strong>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attr">STRIPE_SECRET_KEY</span>=sk_test_XXXXXXXXXXXXXXXXXXXXXXX</div></pre></td></tr></table></figure></p>
<p>There are a few npm packages that we need. These packages will be added to the <em>package.json</em> file due to the <code>--save</code> flag. The <code>npm init</code> command created our <em>package.json</em> file. To install additional Node.js packages with npm run:</p>
<figure class="highlight oxygene"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm install express body-parser cors dotenv <span class="function"><span class="keyword">method</span>-<span class="title">override</span> <span class="title">stripe</span> --<span class="title">save</span></span></div></pre></td></tr></table></figure>
<p>Most of these are helper packages that help the express Node.js web server accept and handle incoming requests from the internet. The Stripe package is for sending and processing payments.</p>
<p>We‚Äôre going to define our application and routes in a <em>server.js</em> file like so:</p>
<p><strong>./server.js</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Grabs our environment variables from the .env file</span></div><div class="line"><span class="built_in">require</span>(<span class="string">'dotenv'</span>).config();</div><div class="line"></div><div class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>),</div><div class="line">    bodyParser = <span class="built_in">require</span>(<span class="string">'body-parser'</span>),</div><div class="line">    methodOverride = <span class="built_in">require</span>(<span class="string">'method-override'</span>),</div><div class="line">    cors = <span class="built_in">require</span>(<span class="string">'cors'</span>),</div><div class="line">    app = express();</div><div class="line"></div><div class="line"><span class="comment">// Environment configuration</span></div><div class="line"><span class="keyword">var</span> env = process.env.NODE_ENV = process.env.NODE_ENV || <span class="string">'development'</span>;</div><div class="line"><span class="keyword">var</span> port = process.env.PORT || <span class="number">3000</span>;</div><div class="line"></div><div class="line"><span class="comment">// Create a server side router</span></div><div class="line"><span class="keyword">var</span> router = express.Router();</div><div class="line"></div><div class="line"><span class="comment">// Configure express to handle HTTP requests</span></div><div class="line">app.use(cors());</div><div class="line">app.use(bodyParser.json());</div><div class="line">app.use(bodyParser.urlencoded(&#123;</div><div class="line">  <span class="attr">extended</span>: <span class="literal">true</span></div><div class="line">&#125;)); </div><div class="line">app.use(methodOverride());</div><div class="line"></div><div class="line"><span class="comment">// Configure our Stripe secret key and object</span></div><div class="line"><span class="keyword">var</span> stripe = <span class="built_in">require</span>(<span class="string">'stripe'</span>)(process.env.STRIPE_SECRET_KEY);</div><div class="line"></div><div class="line"><span class="comment">// Define the route endpoints for our application</span></div><div class="line"></div><div class="line"><span class="comment">// Create a new charge</span></div><div class="line">router.post(<span class="string">'/charge'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>)</span>&#123;</div><div class="line">    <span class="comment">// Create the charge object with data from the Vue.js client</span></div><div class="line">    <span class="keyword">var</span> newCharge = &#123;</div><div class="line">        <span class="attr">amount</span>: <span class="number">23500</span>,</div><div class="line">        <span class="attr">currency</span>: <span class="string">"usd"</span>,</div><div class="line">        <span class="attr">source</span>: req.body.token_from_stripe, <span class="comment">// obtained with Stripe.js on the client side</span></div><div class="line">        description: req.body.specialNote,</div><div class="line">        <span class="attr">receipt_email</span>: req.body.email,</div><div class="line">        <span class="attr">shipping</span>: &#123;</div><div class="line">            <span class="attr">name</span>: req.body.name,</div><div class="line">            <span class="attr">address</span>: &#123;</div><div class="line">                <span class="attr">line1</span>: req.body.address.street,</div><div class="line">                <span class="attr">city</span>: req.body.address.city,</div><div class="line">                <span class="attr">state</span>: req.body.address.state,</div><div class="line">                <span class="attr">postal_code</span>: req.body.address.zip,</div><div class="line">                <span class="attr">country</span>: <span class="string">'US'</span></div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line"></div><div class="line">    <span class="comment">// Call the stripe objects helper functions to trigger a new charge</span></div><div class="line">    stripe.charges.create(newCharge, <span class="function"><span class="keyword">function</span>(<span class="params">err, charge</span>) </span>&#123;</div><div class="line">        <span class="comment">// send response</span></div><div class="line">        <span class="keyword">if</span> (err)&#123;</div><div class="line">            <span class="built_in">console</span>.error(err);</div><div class="line">            res.json(&#123; <span class="attr">error</span>: err, <span class="attr">charge</span>: <span class="literal">false</span> &#125;);</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            <span class="comment">// send response with charge data</span></div><div class="line">            res.json(&#123; <span class="attr">error</span>: <span class="literal">false</span>, <span class="attr">charge</span>: charge &#125;);</div><div class="line">        &#125;</div><div class="line">    &#125;);</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="comment">// Route to get the data for a charge filtered by the charge's id</span></div><div class="line">router.get(<span class="string">'/charge/:id'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>)</span>&#123;</div><div class="line">    stripe.charges.retrieve(req.params.id, <span class="function"><span class="keyword">function</span>(<span class="params">err, charge</span>) </span>&#123;</div><div class="line">        <span class="keyword">if</span> (err)&#123;</div><div class="line">            res.json(&#123; <span class="attr">error</span>: err, <span class="attr">charge</span>: <span class="literal">false</span> &#125;);</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            res.json(&#123; <span class="attr">error</span>: <span class="literal">false</span>, <span class="attr">charge</span>: charge &#125;);</div><div class="line">        &#125;</div><div class="line">    &#125;);</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="comment">// Register the router</span></div><div class="line">app.use(<span class="string">'/'</span>, router);</div><div class="line"></div><div class="line"><span class="comment">// Start the server</span></div><div class="line">app.listen(port, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'Server listening on port '</span> + port)</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>Congrats! We have our application set up in our local environment. To start the Vue application run <code>npm run dev</code> in the command line. Open a separate window and run <code>node server</code>. We can then trigger charges and navigate to the various web pages and hit the URL endpoints. In the next section we are going to deploy these applications to the internet.</p>
<h2 id="Deployment"><a href="#Deployment" class="headerlink" title="Deployment"></a>Deployment</h2><p>Our frontend application is going to be hosted on Amazon S3. Our Node.js server will be hosted on Heroku.</p>
<h3 id="Deploy-Vue-js-app-to-S3"><a href="#Deploy-Vue-js-app-to-S3" class="headerlink" title="Deploy Vue.js app to S3"></a>Deploy Vue.js app to S3</h3><p>First, we are going to deploy our static website to Amazon Simple Storage Service (S3). If you are not familiar with S3 it is also possible to deploy to other static hosting services such as Github Pages or Netlify. S3 is very affordable and has the added benefit of scaling infinitely, in case A LOT of people want to buy sticks.</p>
<p>Head into the AWS Consle and select <strong>S3</strong>. Once there, select <strong>Create Bucket</strong>.</p>
<p><img src="https://cdn.scotch.io/2842/D1CmkEHsSiu1eBTjMqdI_Screen%20Shot%202017-08-18%20at%202.01.50%20PM.png" alt=""></p>
<p>The bucket name must be globally unique so you will not be able to use the same bucketname as me. Since this server will be hosting our code we want it publically accessble to everyone. Select <strong>Grant public read access</strong>.</p>
<p><img src="https://cdn.scotch.io/2842/K38XsXD3S1K0qGWgYi9O_Screen%20Shot%202017-08-18%20at%202.03.53%20PM.png" alt=""></p>
<p>After you created the bucket, click into it and select <strong>Properties</strong> and then go to <strong>Static Website Hosting</strong>. This will serve up our <strong>index.html</strong> file from the bucket‚Äôs unique URL.</p>
<p>Congrats! You have set up an S3 bucket where we can host our website. To build our Vue.js app for production, head into the frontend repo and run:</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm <span class="keyword">run</span><span class="bash"> build</span></div></pre></td></tr></table></figure>
<p>This will generate a <code>dist</code> folder of our bundled Javascript files ready for production. We are going to then upload this folder and index.html to our S3 bucket. Go to your bucket and select <strong>Upload</strong>. Drag and drop our Vue.js app into the bucket.</p>
<p><img src="https://cdn.scotch.io/2842/FUTk5EZOQHSVv7aH0Wqx_Screen%20Shot%202017-08-18%20at%202.11.36%20PM.png" alt=""></p>
<p>Click <strong>Next</strong>. On the following page, select <strong>Grant public read access to this object(s)</strong>. Everything else can be kept as is. </p>
<p>Now if you head to <a href="http://YOUR_BUCKET_NAME.s3-website-REGION.amazonaws.com/#/" target="_blank" rel="external">http://YOUR_BUCKET_NAME.s3-website-REGION.amazonaws.com/#/</a> you will be able to see your site live on the internet. For example, the link for my bucket is:</p>
<p><a href="http://stickly.io.s3-website-us-west-1.amazonaws.com/#/" target="_blank" rel="external">http://stickly.io.s3-website-us-west-1.amazonaws.com/#/</a></p>
<p>We will sort out a nicer domain name (optional step), but first, let‚Äôs deploy our server using Heroku.</p>
<h3 id="Deploy-Node-js-app-to-Heroku"><a href="#Deploy-Node-js-app-to-Heroku" class="headerlink" title="Deploy Node.js app to Heroku"></a>Deploy Node.js app to Heroku</h3><p>We need to add one file called a Procfile that tells Heroku how to start our server. It looks like this:</p>
<p><strong>Procfile</strong>
<figure class="highlight crmsh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">web: <span class="keyword">node</span> <span class="title">server</span>.js</div></pre></td></tr></table></figure></p>
<p>Head into our server-side repo and make sure to install the heroku Command Line Interface (CLI). Check the project into git and create a new heroku application with the following commands:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> git init </span></div><div class="line"><span class="meta">$</span><span class="bash"> git add -A</span></div><div class="line"><span class="meta">$</span><span class="bash"> git commit -m <span class="string">'initial commit'</span></span></div><div class="line"><span class="meta">$</span><span class="bash"> heroku create MY_APP_NAME</span></div></pre></td></tr></table></figure>
<p>We also have to set our environment variables directly with Heroku. Run the following additional commands:</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ heroku config:<span class="builtin-name">set</span> <span class="attribute">STRIPE_SECRET_KEY</span>=sk_test_XXXXXXXXXXXXXXXXXXXXXXX</div></pre></td></tr></table></figure>
<p>To deploy our server and view it in the browser run:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> git push heroku master</span></div><div class="line"><span class="meta">$</span><span class="bash">heroku open</span></div></pre></td></tr></table></figure>
<p>Our backend is live! Now when you navigate to the live frontend site our Vue.js app will call route functions on our Heroku server. Make sure that you update <em>src/main.js</em> environment configuration with you Heroku app name. This way in development we will make XHR (ajax) requests to localhost:3000 but in production requests go to our cloud server.</p>
<p>To accept real money you can update your Stripe environment variables with your production keys.</p>
<p>Congrats on making it through this tutorial! You can view the source code for these applications below:</p>
<ul>
<li>Demo: <a href="http://stickly.io/#/" target="_blank" rel="external">http://stickly.io/#/</a></li>
<li>Frontend code: <a href="https://github.com/connor11528/stickly-frontend" target="_blank" rel="external">https://github.com/connor11528/stickly-frontend</a></li>
<li>Backend code: <a href="https://github.com/connor11528/stickly-backend" target="_blank" rel="external">https://github.com/connor11528/stickly-backend</a></li>
</ul>
<p>Thanks for reading!</p>
<hr>

<p>Also published on Medium as <a href="https://medium.com/@connorleech/standing-on-the-shoulders-of-giants-node-js-vue-2-stripe-heroku-and-amazon-s3-c6fe03ee1118" target="_blank" rel="external">Standing on the shoulders of Giants‚Ää‚Äî‚ÄäNode.js, Vue 2, Stripe, Heroku and Amazon S3</a></p>
</div><div id="disqus_thread"></div></article><nav class="pagination"><a href="/blog/Tutorial-for-building-a-Web-Application-with-Amazon-S3-Lambda-DynamoDB-and-API-Gateway/" title="Tutorial for building a Web Application with Amazon S3, Lambda, DynamoDB and API Gateway" class="btn-default entry-pagination__link entry-pagination__link--prev">Prev</a><a href="/blog/Build-a-Task-List-with-Laravel-5-and-Vue-2/" title="Build a Task List with Laravel 5.4 and Vue 2" class="btn-default entry-pagination__link entry-pagination__link--next">Next</a></nav></div></div></div></main><footer class="footer"><div class="container"><div class="row"><div class="col-sm-6"><h4>Connor11528 dev newsletter</h4><ul><li><form action="//herokuapp.us14.list-manage.com/subscribe/post?u=42dd73a709fbadb4a29ef1d0d&amp;amp;id=b77fdad58d" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" target="_blank" novalidate class="validate"><div class="input-group"><input type="email" value="" name="EMAIL" id="mce-EMAIL" placeholder="Enter your email here" class="required email form-control input-lg"><div id="mce-error-response" style="display:none" class="response"></div><div id="mce-success-response" style="display:none" class="response"></div><div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_42dd73a709fbadb4a29ef1d0d_b77fdad58d" tabindex="-1" value=""></div><span class="input-group-btn"><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="btn btn-primary btn-lg"></span></div></form></li></ul></div><div class="col-sm-2 col-sm-offset-1"><h4>Connect</h4><ul><li> <a target="_blank" href="https://github.com/connor11528">GitHub</a></li><li> <a target="_blank" href="https://www.linkedin.com/in/connorleech">LinkedIn</a></li><li> <a target="_blank" href="https://twitter.com/connor11528">Twitter</a></li><li><a target="_blank" href="https://medium.com/@connorleech">Medium</a></li><li><a target="_blank" href="https://stackoverflow.com/users/2031033/connor-leech">Stackoverflow</a></li><li><a target="_blank" href="https://plus.google.com/u/0/+ConnorLeech">Google+</a></li></ul></div><div class="col-sm-3"><h4>Email</h4><ul><li> <a href="mailto:connorleech@gmail.com">connorleech@gmail.com</a></li></ul></div></div></div></footer><!-- vendor--><script src="/bower_components/jquery/dist/jquery.min.js"></script><script src="/bower_components/bootstrap/dist/js/bootstrap.min.js"></script><script src="/bower_components/wow/dist/wow.min.js"></script><script src="/bower_components/jquery-easing/jquery.easing.min.js"></script><script src="/bower_components/jquery-color/jquery.color.js"></script><script src="/bower_components/scrollmagic/scrollmagic/minified/ScrollMagic.min.js"></script><script src="/bower_components/scrollmagic/scrollmagic/minified/plugins/debug.addIndicators.min.js"></script><script src="/bower_components/vivus/dist/vivus.min.js"></script><!-- require modules--><script src="/js/require.js"></script><script src="/js/app.js"></script><!-- analytics--><!-- disqus--><script>(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://connorleech.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();</script></body></html>