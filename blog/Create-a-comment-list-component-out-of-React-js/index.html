<!DOCTYPE html><html lang="en" prefix="og: http://ogp.me/ns#"><head><meta name="author" content="Connor Leech"><title>Create a comment list component out of React.js</title><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta http-equiv="cleartype" content="on"><meta name="MobileOptimized" content="320"><meta name="HandheldFriendly" content="True"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><meta name="description" content="While working as an Angular 1.x developer I decided to look into React.js because it was the new hotness. This guide walks through creating a CommentList and Comment component that fetches data via AJAX."><meta name="keywords" content="laravel, aws, javascript, php, developer, software engineer, web development, software, node.js, serverless, lambda, san francisco, bay area, east bay, vue, vuejs, vue.js, vue 2, laravel 5, amazon web services"><meta name="zipcode" content="94501"><meta name="city" content="Alameda"><meta name="state" content="California"><meta name="country" content="United States"><meta name="language" content="EN"><meta property="og:site_name" content="Connor Leech Blog | Javascript and Laravel tutorials"><meta property="og:description" content="Get notified about the latest trends in web development, career growth and cloud infrastructure. I send emails about twice a month covering tutorials in Javascript, Laravel and Cloud"><meta property="og:image" content="http://i0.kym-cdn.com/photos/images/original/001/018/899/936.jpg"><meta property="og:title" content="Create a comment list component out of React.js"><meta property="og:description" content="While working as an Angular 1.x developer I decided to look into React.js because it was the new hotness. This guide walks through creating a CommentList and Comment component that fetches data via AJAX."><!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-70809574-1"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());

gtag('config', 'UA-70809574-1');
</script><!-- Favicon--><link rel="shortcut icon" type="image/png" href="/images/favicon.ico"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/images/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png"><!-- Vendor Fonts--><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css" rel="stylesheet" type="text/css"><link href="/bower_components/animate.css/animate.min.css" rel="stylesheet" type="text/css"><link href="https://fonts.googleapis.com/css?family=Yantramanav" rel="stylesheet"><!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries--><!-- WARNING: Respond.js doesn't work if you view the page via file://--><!--if lt IE 9script(src='https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js')
script(src='https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js')
--><link rel="alternate" href="/atom.xml" title="config.title" type="application/rss2.xml"><link rel="stylesheet" href="/css/main.css"></head><body id="page-top" data-spy="scroll" data-target=".navbar-fixed-top" class="post"><!-- Nav--><nav role="navigation" class="navbar navbar-custom navbar-fixed-top"><div class="container"><div class="navbar-header"><a href="/" class="navbar-brand"><img src="/images/employbl_logo.svg" style="height:100px; width:100px;"></a><button type="button" data-toggle="collapse" data-target=".navbar-main-collapse" class="navbar-toggle"><i class="fa fa-bars"></i></button></div><div class="collapse navbar-collapse navbar-left navbar-main-collapse"></div><div class="collapse navbar-collapse navbar-right navbar-main-collapse"><ul class="nav navbar-nav"><li><a href="/blog" class="page-scroll">Blog üî®</a></li><li><a href="/#about" class="page-scroll">About ‚ö°</a></li><li><a href="https://leanpub.com/badass-web-development-with-laravel-5" target="_blank" class="page-scroll">Book üìñ</a></li></ul></div></div></nav><main id="content"><div id="archive" class="container"><div class="row"> <div class="col-sm-2 col-md-2"><h3>Categories</h3><a href="/blog"><p>All</p></a><a href="/categories/Programming"><p>Programming</p></a><a href="/categories/Career"><p>Career</p></a><a href="/categories/Javascript"><p>Javascript</p></a><a href="/categories/Laravel"><p>Laravel</p></a><a href="/categories/Cloud"><p>Cloud</p></a></div><div class="col-xs-12 col-md-8"><article class="post"><div class="row"><div class="col-md-10 col-md-offset-1"><h1 class="post-title">Create a comment list component out of React.js</h1></div></div><div class="row"><div class="post-meta"><h5><span>Connor Leech</span><span class="date"> - Oct 23, 2015&ensp;in<span class="post-categories">&ensp;<a href="/categories/Javascript/" class="post-category">Javascript</a></span></span></h5><a target="_blank" href="http://twitter.com/intent/tweet?status=Create a comment list component out of React.js by @Connor11528+http://connorleech.info/blog/Create-a-comment-list-component-out-of-React-js/" class="btn btn-primary social-share twitter"><i class="fa fa-twitter fa-2x"><span class="hidden-xs"></span></i></a><a target="_blank" href="http://www.linkedin.com/shareArticle?mini=true&amp;url=http://connorleech.info/blog/Create-a-comment-list-component-out-of-React-js/&amp;title=Create a comment list component out of React.js&amp;source=connorleech.info" class="btn btn-primary social-share linkedin"><i class="fa fa-linkedin fa-2x"><span class="hidden-xs"></span></i></a></div></div><div class="post-body"><p>Clone the <a href="https://github.com/connor11528/react-comment-list/tree/f7f7b0451edc008b25817c6fedb44b42001613ee" target="_blank" rel="external">starter code</a> or view the <a href="https://github.com/connor11528/react-comment-list/tree/master" target="_blank" rel="external">finished code</a>.</p>
<h3 id="Create-components"><a href="#Create-components" class="headerlink" title="Create components"></a>Create components</h3><p>commit code: <a href="https://github.com/connor11528/react-comment-list/tree/fd7504266de7266fa16b9286b57eb39a6ba00287" target="_blank" rel="external">https://github.com/connor11528/react-comment-list/tree/fd7504266de7266fa16b9286b57eb39a6ba00287</a>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">CommentList</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">	render()&#123;</div><div class="line">		<span class="keyword">return</span> (</div><div class="line">			&lt;div className=<span class="symbol">'comment</span>-list'&gt;</div><div class="line">				<span class="type">CommentList</span></div><div class="line">			&lt;/div&gt;</div><div class="line">		);</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">CommentForm</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">	render()&#123;</div><div class="line">		<span class="keyword">return</span> (</div><div class="line">			&lt;div className=<span class="symbol">'comment</span>-form'&gt;</div><div class="line">				<span class="type">CommentForm</span></div><div class="line">			&lt;/div&gt;</div><div class="line">		);</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">CommentBox</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">	render()&#123;</div><div class="line">		<span class="keyword">return</span> (</div><div class="line">			&lt;div className=<span class="symbol">'comment</span>-box'&gt;</div><div class="line">				&lt;h1&gt;<span class="type">Comments</span>&lt;/h1&gt;</div><div class="line">				&lt;<span class="type">CommentList</span> /&gt;</div><div class="line">				&lt;<span class="type">CommentForm</span> /&gt;</div><div class="line">			&lt;/div&gt;</div><div class="line">		);</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// add to DOM</span></div><div class="line"><span class="type">React</span>.render(</div><div class="line">	&lt;<span class="type">CommentBox</span>/&gt;,</div><div class="line">	document.getElementById(<span class="symbol">'conten</span>t')</div><div class="line">);</div></pre></td></tr></table></figure></p>
<p>React components have a render method that returns regular HTML. Most of our html and javascript will be bound together in this JSX file. JSX compiles to raw javascript and uses many ES6 features like ‚Äúclass‚Äù and ‚Äúextends‚Äù and arrow functions. We could do all of this in vanillaJS.</p>
<p>Fire up our server with <code>npm install</code> and then <code>npm start</code>. This will launch the express server that is chilling in the ‚Äúbin‚Äù directory. (More magic to come from that file later).</p>
<h3 id="Render-comments-to-screen"><a href="#Render-comments-to-screen" class="headerlink" title="Render comments to screen"></a>Render comments to screen</h3><p>commit code: <a href="https://github.com/jasonshark/react-comment-list/blob/9ed1325f4d55fa467fdc435db72dac4d2e196551/app/app.jsx" target="_blank" rel="external">https://github.com/jasonshark/react-comment-list/blob/9ed1325f4d55fa467fdc435db72dac4d2e196551/app/app.jsx</a></p>
<p>Create a comment component:
<figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Comment</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">	render()&#123;</div><div class="line">		<span class="keyword">return</span> (</div><div class="line">			&lt;div className=<span class="symbol">'commen</span>t'&gt;</div><div class="line">				&lt;div className=<span class="symbol">'comment</span>-body'&gt;</div><div class="line">					&#123;<span class="keyword">this</span>.props.children&#125;</div><div class="line">				&lt;/div&gt;</div><div class="line">				&lt;div className=<span class="symbol">'comment</span>-author'&gt;</div><div class="line">					&#123;<span class="keyword">this</span>.props.author&#125;</div><div class="line">				&lt;/div&gt;</div><div class="line">			&lt;/div&gt;</div><div class="line">		)</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>Now we want to render a list of these individual comments. First we‚Äôll pass an array of normal javascript objects to the commentlist component: <code>&lt;CommentList comments={comments} /&gt;</code> where
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">var comments = [</div><div class="line">	&#123; <span class="string">id:</span> <span class="string">'1'</span>, <span class="string">author:</span> <span class="string">'Connor Leech'</span>, <span class="string">text:</span> <span class="string">'comment from the array'</span>&#125;,</div><div class="line">	&#123; <span class="string">id:</span> <span class="string">'2'</span>, <span class="string">author:</span> <span class="string">'Long John Silver'</span>, <span class="string">text:</span> <span class="string">'arrrrrrr'</span>&#125;</div><div class="line">];</div></pre></td></tr></table></figure></p>
<p>Next in the comment list component we‚Äôll build up an html string in a variable called commentNodes and render it:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">CommentList</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">	render()&#123;</div><div class="line">		<span class="built_in">console</span>.log(<span class="keyword">this</span>.props.comments)</div><div class="line">		<span class="keyword">var</span> commentNodes = <span class="keyword">this</span>.props.comments</div><div class="line">			.map(<span class="function"><span class="keyword">function</span>(<span class="params">comment</span>)</span>&#123;</div><div class="line">				<span class="keyword">return</span> (</div><div class="line">					<span class="xml"><span class="tag">&lt;<span class="name">Comment</span> <span class="attr">author</span>=<span class="string">&#123;comment.author&#125;</span> <span class="attr">key</span>=<span class="string">&#123;comment.id&#125;</span>&gt;</span></span></div><div class="line">						&#123;comment.text&#125;</div><div class="line">					<span class="tag">&lt;/<span class="name">Comment</span>&gt;</span></div><div class="line">				);</div><div class="line">			&#125;);</div><div class="line">		<span class="keyword">return</span> (</div><div class="line">			<span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">'comment-list'</span>&gt;</span></span></div><div class="line">				&#123;commentNodes&#125;</div><div class="line">			<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">		);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><code>this.props.comments</code> refers to the comments array we passed to the component. In React <code>{}</code> denotes raw javascript (escapes the HTML).</p>
<h3 id="Add-reactive-state"><a href="#Add-reactive-state" class="headerlink" title="Add reactive state"></a>Add reactive state</h3><p>commit code: <a href="https://github.com/connor11528/react-comment-list/blob/8d4c07a2c4b13465e8fb1806ff4a9720f9cd7970/app/app.jsx" target="_blank" rel="external">https://github.com/connor11528/react-comment-list/blob/8d4c07a2c4b13465e8fb1806ff4a9720f9cd7970/app/app.jsx</a></p>
<p>Now we‚Äôre going to pass the comments array to the comments box. The advantage of doing this is that when the state changes the view will update very quickly, without page refresh.</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">CommentBox</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">	<span class="comment">// constructor function recieves object of attributes + values</span></div><div class="line">	constructor(props)&#123;</div><div class="line">		<span class="keyword">super</span>();</div><div class="line">		<span class="keyword">this</span>.state = &#123;</div><div class="line">			comments: props.comments</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	render()&#123;</div><div class="line">		<span class="keyword">return</span> (</div><div class="line">			&lt;div className=<span class="symbol">'comment</span>-box'&gt;</div><div class="line">				&lt;h1&gt;<span class="type">Comments</span>&lt;/h1&gt;</div><div class="line">				&lt;<span class="type">CommentList</span> comments=&#123;<span class="keyword">this</span>.state.comments&#125; /&gt;</div><div class="line">				&lt;<span class="type">CommentForm</span> /&gt;</div><div class="line">			&lt;/div&gt;</div><div class="line">		);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>The component constructor function sets the initial values for the components. The CommentList receives its value from the state and the state is set through a property:</p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">commentBox</span> = React.render(</div><div class="line">	&lt;CommentBox comments=&#123;comments&#125;/&gt;,</div><div class="line">	document.getElementById(<span class="string">'content'</span>)</div><div class="line">);</div></pre></td></tr></table></figure>
<p>You can play with <code>commentBox</code> and the setState() method in the browser console to watch updates </p>
<p>React re-renders entire DOM tree in memory when there is a state change. The rendering process that exists in memory is called the virtual DOM. The virtual dom does not get rendered to the page. Instead React does a diff between the DOM tree and the Virtual DOM going node by node, looking for differences. Then there is an array of instructions to convert the DOM with the minimum number of changes.</p>
<p>Finally make an AJAX request and use componentDidMount: <a href="https://github.com/connor11528/react-comment-list/commit/90e0cdd2a58659ffaebcb7ede9ebd03d713cc4fd" target="_blank" rel="external">https://github.com/connor11528/react-comment-list/commit/90e0cdd2a58659ffaebcb7ede9ebd03d713cc4fd</a></p>
<p>Then add comment (the server will write to comments.json): <a href="https://github.com/connor11528/react-comment-list/commit/ef3852a7908028e2a9418412cb0fbfe0ee3e85dc" target="_blank" rel="external">https://github.com/connor11528/react-comment-list/commit/ef3852a7908028e2a9418412cb0fbfe0ee3e85dc</a></p>
<p>Hope this was helpful. Any questions about this tutorial you can <a href="http://twitter.com/connor11528" target="_blank" rel="external">tweet me</a></p>
</div><div id="disqus_thread"></div></article><nav class="pagination"><a href="/blog/Intro-to-angular-ui-router/" title="Intro to Angular UI Router" class="btn-default entry-pagination__link entry-pagination__link--prev">Prev</a><a href="/blog/log-in-with-twitter-from-client-with-angular-and-oauth-io/" title="Client Side Twitter Login with Angular 1.x and OAuth.io" class="btn-default entry-pagination__link entry-pagination__link--next">Next</a></nav></div></div></div></main><footer class="footer"><div class="container"><div class="row"><div class="col-sm-6"><h4>Connor11528 dev newsletter</h4><ul><li><form action="//herokuapp.us14.list-manage.com/subscribe/post?u=42dd73a709fbadb4a29ef1d0d&amp;amp;id=b77fdad58d" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" target="_blank" novalidate class="validate"><div class="input-group"><input type="email" value="" name="EMAIL" id="mce-EMAIL" placeholder="Enter your email here" class="required email form-control input-lg"><div id="mce-error-response" style="display:none" class="response"></div><div id="mce-success-response" style="display:none" class="response"></div><div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_42dd73a709fbadb4a29ef1d0d_b77fdad58d" tabindex="-1" value=""></div><span class="input-group-btn"><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="btn btn-primary btn-lg"></span></div></form></li></ul></div><div class="col-sm-2 col-sm-offset-1"><h4>Connect</h4><ul><li> <a target="_blank" href="https://github.com/connor11528">GitHub</a></li><li> <a target="_blank" href="https://www.linkedin.com/in/connorleech">LinkedIn</a></li><li> <a target="_blank" href="https://twitter.com/connor11528">Twitter</a></li><li><a target="_blank" href="https://medium.com/@connorleech">Medium</a></li><li><a target="_blank" href="https://stackoverflow.com/users/2031033/connor-leech">Stackoverflow</a></li><li><a target="_blank" href="https://plus.google.com/u/0/+ConnorLeech">Google+</a></li></ul></div><div class="col-sm-3"><h4>Email</h4><ul><li> <a href="mailto:connorleech@gmail.com">connorleech@gmail.com</a></li></ul></div></div></div></footer><!-- vendor--><script src="/bower_components/jquery/dist/jquery.min.js"></script><script src="/bower_components/bootstrap/dist/js/bootstrap.min.js"></script><script src="/bower_components/wow/dist/wow.min.js"></script><script src="/bower_components/jquery-easing/jquery.easing.min.js"></script><script src="/bower_components/jquery-color/jquery.color.js"></script><script src="/bower_components/scrollmagic/scrollmagic/minified/ScrollMagic.min.js"></script><script src="/bower_components/scrollmagic/scrollmagic/minified/plugins/debug.addIndicators.min.js"></script><script src="/bower_components/vivus/dist/vivus.min.js"></script><!-- require modules--><script src="/js/require.js"></script><script src="/js/app.js"></script><!-- analytics--><!-- disqus--><script>(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://connorleech.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();</script></body></html>